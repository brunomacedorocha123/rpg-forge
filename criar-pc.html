<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPGForge - Cria√ß√£o de Personagem</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style-principal.css">
</head>
<body>
    <!-- Cabe√ßalho -->
    <header class="header">
        <h1><i class="fas fa-user-plus"></i> Criar Novo Personagem</h1>
        <div class="header-buttons">
            <button class="header-btn btn-save" id="saveBtn">
                <i class="fas fa-save"></i> Salvar
            </button>
            <button class="header-btn btn-edit" id="editBtn">
                <i class="fas fa-edit"></i> Editar
            </button>
            <button class="header-btn btn-clear" id="clearBtn">
                <i class="fas fa-broom"></i> Limpar
            </button>
        </div>
    </header>
    
    <!-- Navega√ß√£o por Tabs -->
    <nav class="tabs">
        <button class="tab active" data-tab="principal">
            <i class="fas fa-user"></i> Principal
        </button>
        <button class="tab" data-tab="vantagens">
            <i class="fas fa-star"></i> Vantagens/Desvantagens
        </button>
        <button class="tab" data-tab="pericias">
            <i class="fas fa-graduation-cap"></i> Per√≠cias/T√©cnicas
        </button>
        <button class="tab" data-tab="magia">
            <i class="fas fa-hat-wizard"></i> Magia
        </button>
        <button class="tab" data-tab="equipamentos">
            <i class="fas fa-shopping-bag"></i> Equipamentos
        </button>
        <button class="tab" data-tab="combate">
            <i class="fas fa-fist-raised"></i> Combate
        </button>
    </nav>
    
    <!-- Conte√∫do Principal -->
    <main class="main-content">
        <!-- Aba Principal -->
        <div id="principal" class="tab-content active">
            <div class="container">
                <!-- SE√á√ÉO 1: IDENTIFICA√á√ÉO -->
                <section class="section identification">
                    <h2 class="section-title">
                        <i class="fas fa-id-card"></i> Identifica√ß√£o do Personagem
                    </h2>
                    
                    <div class="form-grid">
                        <!-- Imagem -->
                        <div class="form-group image-upload">
                            <label><i class="fas fa-portrait"></i> Imagem do Personagem</label>
                            <div class="image-container">
                                <div class="image-preview" id="imagePreview">
                                    <i class="fas fa-user-circle default-avatar"></i>
                                    <span class="image-text">Clique para adicionar imagem</span>
                                </div>
                                <input type="file" id="imagemPersonagem" accept="image/*" hidden>
                                <div class="image-buttons">
                                    <button type="button" class="btn-image btn-choose" id="chooseImageBtn">
                                        <i class="fas fa-folder-open"></i> Escolher
                                    </button>
                                    <button type="button" class="btn-image btn-remove" id="removeImageBtn" disabled>
                                        <i class="fas fa-trash"></i> Remover
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Nome e Classe -->
                        <div class="form-group">
                            <label for="nome"><i class="fas fa-user"></i> Nome do Personagem</label>
                            <input type="text" id="nome" placeholder="Digite o nome do personagem">
                        </div>
                        
                        <div class="form-group">
                            <label for="classe"><i class="fas fa-crown"></i> Classe</label>
                            <select id="classe">
                                <option value="">Selecione uma classe</option>
                                <option value="guerreiro">Guerreiro</option>
                                <option value="mago">Mago</option>
                                <option value="arqueiro">Arqueiro</option>
                                <option value="ladino">Ladino</option>
                                <option value="clerigo">Cl√©rigo</option>
                            </select>
                        </div>
                        
                        <!-- Ra√ßa e ID -->
                        <div class="form-group">
                            <label for="raca"><i class="fas fa-dragon"></i> Ra√ßa</label>
                            <select id="raca">
                                <option value="">Selecione uma ra√ßa</option>
                                <option value="humano">Humano</option>
                                <option value="elfo">Elfo</option>
                                <option value="anao">An√£o</option>
                                <option value="orc">Orc</option>
                                <option value="halfling">Halfling</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label><i class="fas fa-fingerprint"></i> ID do Personagem</label>
                            <div class="id-display">
                                <span id="personagemId">Aguardando cria√ß√£o...</span>
                                <small class="id-note">(ser√° gerado automaticamente)</small>
                            </div>
                        </div>
                        
                        <!-- Idade e Altura/Peso -->
                        <div class="form-group">
                            <label for="idade"><i class="fas fa-birthday-cake"></i> Idade</label>
                            <div class="number-input">
                                <input type="number" id="idade" min="12" max="500" value="25">
                                <div class="number-buttons">
                                    <button type="button" class="btn-number minus">-</button>
                                    <button type="button" class="btn-number plus">+</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label><i class="fas fa-ruler-vertical"></i> Altura/Peso</label>
                            <div class="height-weight">
                                <div class="hw-input">
                                    <input type="number" id="altura" min="1.20" max="2.50" step="0.01" value="1.70">
                                    <span class="hw-unit">m</span>
                                </div>
                                <div class="hw-input">
                                    <input type="number" id="peso" min="20" max="200" step="1" value="70">
                                    <span class="hw-unit">kg</span>
                                </div>
                                <button type="button" class="btn-custom" id="customizeBtn">
                                    <i class="fas fa-sliders-h"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Hist√≥ria -->
                    <div class="form-group history">
                        <label for="historia"><i class="fas fa-scroll"></i> Hist√≥ria do Personagem</label>
                        <textarea id="historia" rows="3" placeholder="Descreva a hist√≥ria, motiva√ß√µes e personalidade do seu personagem..."></textarea>
                    </div>
                </section>
                
                <!-- SE√á√ÉO 2: ATRIBUTOS -->
                <section class="section attributes">
                    <h2 class="section-title">
                        <i class="fas fa-chart-line"></i> Atributos B√°sicos
                    </h2>
                    
                    <!-- Atributos Principais -->
                    <div class="attributes-grid">
                        <div class="attribute-card">
                            <h3>For√ßa (ST)</h3>
                            <div class="attribute-value" id="currentST">10</div>
                            <div class="attribute-controls">
                                <button class="btn-attr minus">-</button>
                                <input type="number" id="ST" value="10" readonly>
                                <button class="btn-attr plus">+</button>
                            </div>
                        </div>
                        
                        <div class="attribute-card">
                            <h3>Destreza (DX)</h3>
                            <div class="attribute-value" id="currentDX">10</div>
                            <div class="attribute-controls">
                                <button class="btn-attr minus">-</button>
                                <input type="number" id="DX" value="10" readonly>
                                <button class="btn-attr plus">+</button>
                            </div>
                        </div>
                        
                        <div class="attribute-card">
                            <h3>Intelig√™ncia (IQ)</h3>
                            <div class="attribute-value" id="currentIQ">10</div>
                            <div class="attribute-controls">
                                <button class="btn-attr minus">-</button>
                                <input type="number" id="IQ" value="10" readonly>
                                <button class="btn-attr plus">+</button>
                            </div>
                        </div>
                        
                        <div class="attribute-card">
                            <h3>Sa√∫de (HT)</h3>
                            <div class="attribute-value" id="currentHT">10</div>
                            <div class="attribute-controls">
                                <button class="btn-attr minus">-</button>
                                <input type="number" id="HT" value="10" readonly>
                                <button class="btn-attr plus">+</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Carga e Dano -->
                    <div class="secondary-info">
                        <div class="info-card">
                            <h3><i class="fas fa-weight-hanging"></i> N√≠veis de Carga</h3>
                            <div class="info-list">
                                <div class="info-item">
                                    <span>Nenhuma:</span>
                                    <span id="cargaNenhuma">0.0</span>
                                </div>
                                <div class="info-item">
                                    <span>Leve:</span>
                                    <span id="cargaLeve">0.0</span>
                                </div>
                                <div class="info-item">
                                    <span>M√©dia:</span>
                                    <span id="cargaMedia">0.0</span>
                                </div>
                                <div class="info-item">
                                    <span>Pesada:</span>
                                    <span id="cargaPesada">0.0</span>
                                </div>
                                <div class="info-item">
                                    <span>Muito Pesada:</span>
                                    <span id="cargaMuitoPesada">0.0</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="info-card">
                            <h3><i class="fas fa-fist-raised"></i> Dano B√°sico</h3>
                            <div class="info-list">
                                <div class="info-item">
                                    <span>Golpe Desarmado (GdP):</span>
                                    <span id="danoGDP">1d-2</span>
                                </div>
                                <div class="info-item">
                                    <span>Golpe com Arma (GeB):</span>
                                    <span id="danoGEB">1d</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Atributos Secund√°rios -->
                    <div class="secondary-attributes">
                        <div class="secondary-attr">
                            <span>Pontos de Vida (PV)</span>
                            <div class="attr-values">
                                <span id="PVBase">10</span>
                                <span>+</span>
                                <input type="number" id="bonusPV" value="0">
                                <span>=</span>
                                <span id="PVTotal">10</span>
                            </div>
                            <div class="attr-buttons">
                                <button class="btn-secondary minus">-</button>
                                <button class="btn-secondary plus">+</button>
                            </div>
                        </div>
                        
                        <div class="secondary-attr">
                            <span>Pontos de Fadiga (PF)</span>
                            <div class="attr-values">
                                <span id="PFBase">10</span>
                                <span>+</span>
                                <input type="number" id="bonusPF" value="0">
                                <span>=</span>
                                <span id="PFTotal">10</span>
                            </div>
                            <div class="attr-buttons">
                                <button class="btn-secondary minus">-</button>
                                <button class="btn-secondary plus">+</button>
                            </div>
                        </div>
                        
                        <div class="secondary-attr">
                            <span>Vontade</span>
                            <div class="attr-values">
                                <span id="VontadeBase">10</span>
                                <span>+</span>
                                <input type="number" id="bonusVontade" value="0">
                                <span>=</span>
                                <span id="VontadeTotal">10</span>
                            </div>
                            <div class="attr-buttons">
                                <button class="btn-secondary minus">-</button>
                                <button class="btn-secondary plus">+</button>
                            </div>
                        </div>
                        
                        <div class="secondary-attr">
                            <span>Percep√ß√£o</span>
                            <div class="attr-values">
                                <span id="PercepcaoBase">10</span>
                                <span>+</span>
                                <input type="number" id="bonusPercepcao" value="0">
                                <span>=</span>
                                <span id="PercepcaoTotal">10</span>
                            </div>
                            <div class="attr-buttons">
                                <button class="btn-secondary minus">-</button>
                                <button class="btn-secondary plus">+</button>
                            </div>
                        </div>
                        
                        <div class="secondary-attr">
                            <span>Deslocamento</span>
                            <div class="attr-values">
                                <span id="DeslocamentoBase">5.00</span>
                                <span>+</span>
                                <input type="number" id="bonusDeslocamento" value="0">
                                <span>=</span>
                                <span id="DeslocamentoTotal">5.00</span>
                            </div>
                            <div class="attr-buttons">
                                <button class="btn-secondary minus">-</button>
                                <button class="btn-secondary plus">+</button>
                            </div>
                        </div>
                    </div>
                </section>
                
               <!-- CARDS LATERAIS (Rea√ß√£o e Riqueza) -->
<div class="side-cards">
    <!-- Card de Rea√ß√£o -->
    <div class="side-card">
        <div class="card-header">
            <h3><i class="fas fa-handshake"></i> Modificador de Rea√ß√£o</h3>
        </div>
        <div class="card-body">
            <div class="reaction-item">
                <label>Apar√™ncia</label>
                <div class="reaction-control">
                    <button class="btn-reaction minus">-</button>
                    <input type="number" id="aparencia" value="0" min="-5" max="5">
                    <button class="btn-reaction plus">+</button>
                </div>
            </div>
            <div class="reaction-item">
                <label>Reputa√ß√£o</label>
                <div class="reaction-control">
                    <button class="btn-reaction minus">-</button>
                    <input type="number" id="reputacao" value="0" min="-5" max="5">
                    <button class="btn-reaction plus">+</button>
                </div>
            </div>
            <div class="reaction-item">
                <label>Status</label>
                <div class="reaction-control">
                    <button class="btn-reaction minus">-</button>
                    <input type="number" id="status" value="0" min="-5" max="5">
                    <button class="btn-reaction plus">+</button>
                </div>
            </div>
            <div class="reaction-item">
                <label>Carisma</label>
                <div class="reaction-control">
                    <button class="btn-reaction minus">-</button>
                    <input type="number" id="carisma" value="0" min="-5" max="5">
                    <button class="btn-reaction plus">+</button>
                </div>
            </div>
            <div class="reaction-total">
                <strong>Total:</strong>
                <span id="reacaoTotal">0</span>
            </div>
        </div>
    </div>
    
    <!-- Card de Riqueza CORRIGIDO -->
    <div class="side-card">
        <div class="card-header">
            <h3><i class="fas fa-gem"></i> Sistema de Riqueza</h3>
            <div class="pontos-badge" id="pontosRiquezaBadge">0 pts</div>
        </div>
        <div class="card-body">
            <div class="wealth-item">
                <label for="nivelRiqueza">N√≠vel de Riqueza</label>
                <select id="nivelRiqueza">
                    <!-- Desvantagens -->
                    <option value="-25">Miser√°vel/Falido (-25 pts)</option>
                    <option value="-15">Pobre (-15 pts)</option>
                    <option value="-10">Batalhador (-10 pts)</option>
                    <!-- N√≠vel m√©dio (neutro) -->
                    <option value="0" selected>M√©dio (0 pts)</option>
                    <!-- Vantagens -->
                    <option value="10">Confort√°vel (10 pts)</option>
                    <option value="20">Rico (20 pts)</option>
                    <option value="30">Muito Rico (30 pts)</option>
                    <option value="50">Poderoso/Multimilion√°rio (50 pts)</option>
                </select>
            </div>
            
            <div class="wealth-display" id="displayRiqueza">
                <div style="margin-bottom: 8px;">
                    <strong style="color: var(--text-gold);">M√©dio</strong>
                </div>
                <div style="font-size: 0.9em; color: var(--text-light); opacity: 0.8;">
                    <div>Multiplicador: 1√ó | Recursos: Padr√£o</div>
                    <div style="margin-top: 4px;">N√≠vel de recursos pr√©-definido padr√£o</div>
                </div>
            </div>
            
            <div class="wealth-values">
                <div class="wealth-display">
                    <label>Multiplicador</label>
                    <div class="display-value">
                        <span id="multiplicadorRiqueza">√ó1</span>
                    </div>
                </div>
                
                <div class="wealth-input">
                    <label>Renda Mensal</label>
                    <div class="display-value total">
                        <span class="currency">$</span>
                        <span id="rendaMensal">1.000</span>
                    </div>
                </div>
                
                <div class="wealth-saldo">
                    <label for="saldoAtual">Saldo Atual</label>
                    <div class="input-group">
                        <span class="currency">$</span>
                        <input type="number" id="saldoAtual" value="1000">
                    </div>
                </div>
            </div>
            
           
        </div>
    </div>
</div>
                
                <!-- SE√á√ÉO 4: SISTEMA DE PONTOS -->
                <section class="section points-system">
                    <h2 class="section-title">
                        <i class="fas fa-coins"></i> Sistema de Pontos
                    </h2>
                    
                    <!-- Pontos Base -->
                    <div class="points-base">
                        <div class="base-points">
                            <div class="points-input">
                                <label>
                                    <i class="fas fa-play-circle"></i>
                                    Pontos Iniciais
                                </label>
                                <div class="input-with-unit">
                                    <input type="number" id="pontosIniciais" value="150">
                                    <span class="unit">pts</span>
                                </div>
                            </div>
                            
                            <div class="points-input">
                                <label>
                                    <i class="fas fa-trophy"></i>
                                    Pontos da Campanha
                                </label>
                                <div class="input-with-unit">
                                    <input type="number" id="pontosGanhos" value="0">
                                    <span class="unit">pts</span>
                                </div>
                            </div>
                            
                            <div class="points-total">
                                <label>
                                    <i class="fas fa-calculator"></i>
                                    Total Dispon√≠vel
                                </label>
                                <div class="total-value">
                                    <span id="pontosDisponiveis">150</span>
                                    <span class="unit">pts</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Resumo de Pontos Gastos -->
                    <div class="points-summary">
                        <h3 class="subtitle">
                            <i class="fas fa-list-alt"></i> Resumo de Pontos Gastos
                        </h3>
                        
                        <div class="categories-grid">
                            <div class="category">
                                <div class="category-header">
                                    <i class="fas fa-chart-line"></i>
                                    Atributos
                                </div>
                                <div class="category-value">
                                    <span id="pontosAtributos">0</span>
                                    <small>pts</small>
                                </div>
                                <div class="category-percent" id="percAtributos">0%</div>
                            </div>
                            
                            <div class="category">
                                <div class="category-header">
                                    <i class="fas fa-star"></i>
                                    Vantagens
                                </div>
                                <div class="category-value">
                                    <span id="pontosVantagens">0</span>
                                    <small>pts</small>
                                </div>
                                <div class="category-percent" id="percVantagens">0%</div>
                            </div>
                            
                            <div class="category negative">
                                <div class="category-header">
                                    <i class="fas fa-thumbs-down"></i>
                                    Desvantagens
                                </div>
                                <div class="category-value">
                                    <span id="pontosDesvantagens">0</span>
                                    <small>pts</small>
                                </div>
                                <div class="category-percent" id="percDesvantagens">0%</div>
                            </div>
                            
                            <div class="category negative">
                                <div class="category-header">
                                    <i class="fas fa-user-tag"></i>
                                    Peculiaridades
                                </div>
                                <div class="category-value">
                                    <span id="pontosPeculiaridades">0</span>
                                    <small>pts</small>
                                </div>
                                <div class="category-percent" id="percPeculiaridades">0%</div>
                            </div>
                            
                            <div class="category">
                                <div class="category-header">
                                    <i class="fas fa-graduation-cap"></i>
                                    Per√≠cias
                                </div>
                                <div class="category-value">
                                    <span id="pontosPericias">0</span>
                                    <small>pts</small>
                                </div>
                                <div class="category-percent" id="percPericias">0%</div>
                            </div>
                            
                            <div class="category">
                                <div class="category-header">
                                    <i class="fas fa-book"></i>
                                    T√©cnicas
                                </div>
                                <div class="category-value">
                                    <span id="pontosTecnicas">0</span>
                                    <small>pts</small>
                                </div>
                                <div class="category-percent" id="percTecnicas">0%</div>
                            </div>
                            
                            <div class="category">
                                <div class="category-header">
                                    <i class="fas fa-hat-wizard"></i>
                                    Magia
                                </div>
                                <div class="category-value">
                                    <span id="pontosMagia">0</span>
                                    <small>pts</small>
                                </div>
                                <div class="category-percent" id="percMagia">0%</div>
                            </div>
                        </div>
                        
                        <!-- Limites -->
                        <div class="points-limits">
                            <h3 class="subtitle">
                                <i class="fas fa-exclamation-triangle"></i> Limites
                            </h3>
                            
                            <div class="limits-grid">
                                <div class="limit-item">
                                    <div class="limit-header">
                                        <div class="limit-label">
                                            <i class="fas fa-thumbs-down"></i>
                                            Desvantagens
                                        </div>
                                        <div class="limit-input">
                                            <input type="number" id="limiteDesvantagens" value="40">
                                            <span class="unit">pts</span>
                                        </div>
                                    </div>
                                    <div class="limit-progress">
                                        <div class="progress-bar">
                                            <div class="progress-fill" id="progressDesvantagens" style="width: 0%"></div>
                                        </div>
                                        <div class="progress-text">
                                            <span id="textDesvantagens">0/40 pts</span>
                                            <span id="percentDesvantagens">0%</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="limit-item">
                                    <div class="limit-header">
                                        <div class="limit-label">
                                            <i class="fas fa-user-tag"></i>
                                            Peculiaridades
                                        </div>
                                        <div class="limit-input">
                                            <input type="number" id="limitePeculiaridades" value="20">
                                            <span class="unit">pts</span>
                                        </div>
                                    </div>
                                    <div class="limit-progress">
                                        <div class="progress-bar">
                                            <div class="progress-fill" id="progressPeculiaridades" style="width: 0%"></div>
                                        </div>
                                        <div class="progress-text">
                                            <span id="textPeculiaridades">0/20 pts</span>
                                            <span id="percentPeculiaridades">0%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Total Gastos -->
                        <div class="points-total-spent">
                            <div class="total-card">
                                <div class="total-label">
                                    <i class="fas fa-money-bill-wave"></i>
                                    Total Gastos
                                </div>
                                <div class="total-value">
                                    <span id="pontosGastos">0</span>
                                    <span class="unit">pts</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
        
        <!-- Outras abas (em desenvolvimento) -->
        <div id="vantagens" class="tab-content">
            <div class="dev-placeholder">
                <i class="fas fa-tools fa-3x"></i>
                <h3>Vantagens e Desvantagens</h3>
                <p>Esta aba est√° em desenvolvimento</p>
            </div>
        </div>
        
        <div id="pericias" class="tab-content">
            <div class="dev-placeholder">
                <i class="fas fa-tools fa-3x"></i>
                <h3>Per√≠cias e T√©cnicas</h3>
                <p>Esta aba est√° em desenvolvimento</p>
            </div>
        </div>
        
        <div id="magia" class="tab-content">
            <div class="dev-placeholder">
                <i class="fas fa-tools fa-3x"></i>
                <h3>Magia</h3>
                <p>Esta aba est√° em desenvolvimento</p>
            </div>
        </div>
        
        <div id="equipamentos" class="tab-content">
            <div class="dev-placeholder">
                <i class="fas fa-tools fa-3x"></i>
                <h3>Equipamentos</h3>
                <p>Esta aba est√° em desenvolvimento</p>
            </div>
        </div>
        
        <div id="combate" class="tab-content">
            <div class="dev-placeholder">
                <i class="fas fa-tools fa-3x"></i>
                <h3>Combate</h3>
                <p>Esta aba est√° em desenvolvimento</p>
            </div>
        </div>
    </main>
    
    <!-- Modal para Altura/Peso -->
    <div class="modal" id="alturaPesoModal">
        <div class="modal-dialog">
            <div class="modal-header">
                <h3><i class="fas fa-sliders-h"></i> Personalizar Altura e Peso</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-section">
                    <h4><i class="fas fa-user-circle"></i> Caracter√≠sticas F√≠sicas</h4>
                    <div class="features-grid">
                        <button class="feature-btn" data-type="magro">
                            <i class="fas fa-person-walking"></i>
                            <span>Magro<br><small>-5 pts</small></span>
                        </button>
                        <button class="feature-btn" data-type="acima-peso">
                            <i class="fas fa-weight-hanging"></i>
                            <span>Acima do Peso<br><small>-1 pts</small></span>
                        </button>
                        <button class="feature-btn" data-type="gordo">
                            <i class="fas fa-weight-hanging"></i>
                            <span>Gordo<br><small>-3 pts</small></span>
                        </button>
                        <button class="feature-btn" data-type="muito-gordo">
                            <i class="fas fa-weight-hanging"></i>
                            <span>Muito Gordo<br><small>-5 pts</small></span>
                        </button>
                        <button class="feature-btn" data-type="nanismo">
                            <i class="fas fa-arrow-down"></i>
                            <span>Nanismo<br><small>-15 pts</small></span>
                        </button>
                        <button class="feature-btn" data-type="gigantismo">
                            <i class="fas fa-arrow-up"></i>
                            <span>Gigantismo<br><small>0 pts</small></span>
                        </button>
                    </div>
                </div>
                
                <div class="modal-section">
                    <h4><i class="fas fa-sliders-h"></i> Ajustes Manuais</h4>
                    <div class="manual-adjustments">
                        <div class="adjustment">
                            <label for="alturaModal">Altura (m)</label>
                            <div class="adjustment-controls">
                                <button class="btn-adjust minus">-</button>
                                <input type="number" id="alturaModal" value="1.70" step="0.01">
                                <button class="btn-adjust plus">+</button>
                            </div>
                        </div>
                        
                        <div class="adjustment">
                            <label for="pesoModal">Peso (kg)</label>
                            <div class="adjustment-controls">
                                <button class="btn-adjust minus">-</button>
                                <input type="number" id="pesoModal" value="70">
                                <button class="btn-adjust plus">+</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="modal-section">
                    <h4><i class="fas fa-info-circle"></i> Status Atual</h4>
                    <div class="status-info">
                        <div class="status-item">
                            <span>ST Base:</span>
                            <strong id="statusST">10</strong>
                        </div>
                        <div class="status-item">
                            <span>Faixa de Altura:</span>
                            <strong id="faixaAltura">1.58m - 1.83m</strong>
                        </div>
                        <div class="status-item">
                            <span>Faixa de Peso:</span>
                            <strong id="faixaPeso">57.5kg - 87.5kg</strong>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelBtn">Cancelar</button>
                <button class="btn btn-primary" id="applyBtn">Aplicar</button>
            </div>
        </div>
    </div>
    <!-- Ap√≥s suas outras tags script -->
<script src="firebase-save.js"></script>
<script src="pontos-manager.js"></script>
<script src="atributos.js"></script>
<script src="caracteristicas-fisica.js"></script>
<script src="caracteristicas-riqueza.js"></script>
    <script>
    // ===========================================
    // INICIALIZADOR GLOBAL - CORRE√á√ÉO SEM QUEBRAR NADA
    // ===========================================
    
    // Sistema de Tabs (MANTIDO ORIGINAL)
    document.querySelectorAll('.tab').forEach(tab => {
        tab.addEventListener('click', () => {
            // Remove active de todas as tabs
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            
            // Adiciona active na tab clicada
            tab.classList.add('active');
            const tabId = tab.dataset.tab;
            document.getElementById(tabId).classList.add('active');
        });
    });
    
    // Modal Altura/Peso (MANTIDO ORIGINAL)
    const modal = document.getElementById('alturaPesoModal');
    const customizeBtn = document.getElementById('customizeBtn');
    const closeModal = document.querySelector('.modal-close');
    const cancelBtn = document.getElementById('cancelBtn');
    const applyBtn = document.getElementById('applyBtn');
    
    if (customizeBtn) {
        customizeBtn.addEventListener('click', () => {
            modal.style.display = 'block';
            // Adiciona: Inicializa o modal das caracter√≠sticas f√≠sicas se existir
            if (window.inicializarSistemaCaracteristicas) {
                setTimeout(() => {
                    const sistema = window.inicializarSistemaCaracteristicas();
                    if (sistema && sistema.abrirModal) {
                        sistema.abrirModal();
                    }
                }, 100);
            }
        });
    }
    
    if (closeModal) {
        closeModal.addEventListener('click', () => {
            modal.style.display = 'none';
            // Adiciona: Fecha o modal corretamente
            if (window.obterSistemaCaracteristicas) {
                const sistema = window.obterSistemaCaracteristicas();
                if (sistema && sistema.fecharModal) {
                    sistema.fecharModal();
                }
            }
        });
    }
    
    if (cancelBtn) {
        cancelBtn.addEventListener('click', () => {
            modal.style.display = 'none';
            // Adiciona: Fecha o modal corretamente
            if (window.obterSistemaCaracteristicas) {
                const sistema = window.obterSistemaCaracteristicas();
                if (sistema && sistema.fecharModal) {
                    sistema.fecharModal();
                }
            }
        });
    }
    
    if (applyBtn) {
        applyBtn.addEventListener('click', () => {
            // Adiciona: Aplica as mudan√ßas do modal
            if (window.obterSistemaCaracteristicas) {
                const sistema = window.obterSistemaCaracteristicas();
                if (sistema && sistema.aplicarAlteracoes) {
                    sistema.aplicarAlteracoes();
                } else {
                    modal.style.display = 'none';
                }
            } else {
                modal.style.display = 'none';
            }
        });
    }
    
    // Fechar modal ao clicar fora (MANTIDO ORIGINAL com melhoria)
    window.addEventListener('click', (e) => {
        if (e.target === modal) {
            modal.style.display = 'none';
            // Adiciona: Fecha o modal corretamente
            if (window.obterSistemaCaracteristicas) {
                const sistema = window.obterSistemaCaracteristicas();
                if (sistema && sistema.fecharModal) {
                    sistema.fecharModal();
                }
            }
        }
    });
    
    // Bot√µes do cabe√ßalho (MANTIDO ORIGINAL)
    document.getElementById('saveBtn').addEventListener('click', () => {
        alert('Funcionalidade de salvar ser√° implementada posteriormente.');
    });
    
    document.getElementById('editBtn').addEventListener('click', () => {
        alert('Modo edi√ß√£o ativado!');
    });
    
    document.getElementById('clearBtn').addEventListener('click', () => {
        if (confirm('Tem certeza que deseja limpar todos os dados?')) {
            alert('Dados limpos! (funcionalidade em desenvolvimento)');
        }
    });
    
    // ===========================================
    // FUN√á√ÉO DE INICIALIZA√á√ÉO DE TODOS OS SISTEMAS
    // ===========================================
    
    function inicializarTodosSistemas() {
        console.log('üîÑ Inicializando todos os sistemas RPG...');
        
        // 1. Inicializa o sistema de pontos (primeiro - importante!)
        setTimeout(() => {
            if (window.obterPontosManager) {
                window.obterPontosManager();
                console.log('‚úÖ Sistema de pontos inicializado');
            } else {
                console.log('‚ö†Ô∏è Sistema de pontos n√£o encontrado');
            }
        }, 100);
        
        // 2. Inicializa sistema de atributos (se existir)
        setTimeout(() => {
            if (window.inicializarSistemaAtributos) {
                window.inicializarSistemaAtributos();
                console.log('‚úÖ Sistema de atributos inicializado');
            }
        }, 200);
        
        // 3. Inicializa sistema de caracter√≠sticas f√≠sicas
        setTimeout(() => {
            if (window.inicializarSistemaCaracteristicas) {
                window.inicializarSistemaCaracteristicas();
                console.log('‚úÖ Sistema de caracter√≠sticas f√≠sicas inicializado');
            }
        }, 300);
        
        // 4. Inicializa sistema de riqueza (AGORA FUNCIONANDO!)
        setTimeout(() => {
            if (window.inicializarSistemaRiqueza) {
                window.inicializarSistemaRiqueza();
                console.log('‚úÖ Sistema de riqueza inicializado');
            } else if (window.SistemaRiqueza) {
                // Tenta inicializar de outra forma
                new window.SistemaRiqueza();
                console.log('‚úÖ Sistema de riqueza inicializado (via classe)');
            }
        }, 400);
        
        // 5. Inicializa sistema de rea√ß√£o (se existir)
        setTimeout(() => {
            const elementosReacao = document.querySelectorAll('.btn-reaction');
            if (elementosReacao.length > 0) {
                inicializarSistemaReacao();
                console.log('‚úÖ Sistema de rea√ß√£o inicializado');
            }
        }, 500);
    }
    
    // ===========================================
    // SISTEMA DE REA√á√ÉO (NOVO - para o card de rea√ß√£o)
    // ===========================================
    
    function inicializarSistemaReacao() {
        const botoesReacao = document.querySelectorAll('.btn-reaction');
        
        botoesReacao.forEach(botao => {
            botao.addEventListener('click', function() {
                const input = this.parentElement.querySelector('input[type="number"]');
                if (!input) return;
                
                const valorAtual = parseInt(input.value) || 0;
                const min = parseInt(input.min) || -5;
                const max = parseInt(input.max) || 5;
                
                if (this.classList.contains('plus') && valorAtual < max) {
                    input.value = valorAtual + 1;
                } else if (this.classList.contains('minus') && valorAtual > min) {
                    input.value = valorAtual - 1;
                }
                
                // Dispara evento de change para atualizar
                input.dispatchEvent(new Event('change'));
                calcularTotalReacao();
            });
        });
        
        // Atualiza quando os inputs mudam
        const inputsReacao = document.querySelectorAll('.reaction-control input');
        inputsReacao.forEach(input => {
            input.addEventListener('change', calcularTotalReacao);
        });
        
        function calcularTotalReacao() {
            let total = 0;
            const inputs = document.querySelectorAll('.reaction-control input');
            
            inputs.forEach(input => {
                total += parseInt(input.value) || 0;
            });
            
            const elementoTotal = document.getElementById('reacaoTotal');
            if (elementoTotal) {
                elementoTotal.textContent = total;
                
                // Adiciona cor baseada no valor
                elementoTotal.className = '';
                if (total > 0) {
                    elementoTotal.classList.add('positivo');
                } else if (total < 0) {
                    elementoTotal.classList.add('negativo');
                }
            }
        }
        
        // Calcula inicial
        calcularTotalReacao();
    }
    
    // ===========================================
    // FUN√á√ÉO PARA TESTAR O SISTEMA COMPLETO
    // ===========================================
    
    window.testarSistemaCompleto = function() {
        console.log('üß™ TESTANDO SISTEMA COMPLETO...');
        
        // Testa riqueza como desvantagem
        if (window.SistemaRiqueza || window.inicializarSistemaRiqueza) {
            console.log('1. Testando riqueza (Batalhador: -10 pts)...');
            // Simula mudan√ßa para Batalhador
            const selectRiqueza = document.getElementById('nivelRiqueza');
            if (selectRiqueza) {
                selectRiqueza.value = "-10";
                selectRiqueza.dispatchEvent(new Event('change'));
            }
        }
        
        // Testa caracter√≠sticas f√≠sicas
        setTimeout(() => {
            console.log('2. Testando caracter√≠sticas f√≠sicas (Magro: -5 pts)...');
            // Abre o modal
            if (customizeBtn) {
                customizeBtn.click();
                
                // Simula clicar em Magro
                setTimeout(() => {
                    const botaoMagro = document.querySelector('.feature-btn[data-type="magro"]');
                    if (botaoMagro) {
                        botaoMagro.click();
                        
                        // Fecha o modal e aplica
                        setTimeout(() => {
                            if (applyBtn) {
                                applyBtn.click();
                                console.log('‚úÖ Teste aplicado!');
                                
                                // Verifica resultado
                                setTimeout(() => {
                                    console.log('üìä Verifique se os pontos est√£o sendo somados:');
                                    console.log('- Riqueza Batalhador: -10 pts (desvantagem)');
                                    console.log('- Caracter√≠stica Magro: -5 pts (desvantagem)');
                                    console.log('- TOTAL desvantagens esperado: 15 pts');
                                    console.log('- Pontos dispon√≠veis esperados: 150 + 15 = 165 pts');
                                }, 1000);
                            }
                        }, 500);
                    }
                }, 500);
            }
        }, 1000);
    };
    
    // ===========================================
    // INICIALIZA√á√ÉO QUANDO A P√ÅGINA CARREGA
    // ===========================================
    
    document.addEventListener('DOMContentLoaded', function() {
        console.log('üìÑ P√°gina carregada, iniciando sistemas...');
        
        // Espera um pouco para garantir que tudo esteja carregado
        setTimeout(() => {
            inicializarTodosSistemas();
            
            // Adiciona bot√£o de teste para debug (remove em produ√ß√£o)
            if (window.location.href.includes('localhost') || window.location.href.includes('127.0.0.1')) {
                const testBtn = document.createElement('button');
                testBtn.textContent = 'üîß Testar Sistema';
                testBtn.style.cssText = `
                    position: fixed;
                    bottom: 20px;
                    right: 20px;
                    z-index: 1000;
                    background: #3498db;
                    color: white;
                    border: none;
                    padding: 10px 15px;
                    border-radius: 5px;
                    cursor: pointer;
                    font-size: 12px;
                `;
                testBtn.onclick = window.testarSistemaCompleto;
                document.body.appendChild(testBtn);
            }
        }, 1000);
    });
    
    // ===========================================
    // EVENTO PARA QUANDO MUDA DE ABA
    // ===========================================
    
    // Adiciona evento personalizado para quando muda de aba
    const tabs = document.querySelectorAll('.tab');
    tabs.forEach(tab => {
        tab.addEventListener('click', function() {
            const tabId = this.dataset.tab;
            
            // Dispara evento personalizado
            const evento = new CustomEvent('tabChanged', {
                detail: tabId
            });
            document.dispatchEvent(evento);
            
            // Se for a aba principal, garante que os sistemas est√£o inicializados
            if (tabId === 'principal') {
                setTimeout(() => {
                    inicializarTodosSistemas();
                }, 300);
            }
        });
    });
</script>
</body>
</html>