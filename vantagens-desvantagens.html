<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vantagens e Desvantagens - RPGForce</title>
    
    <!-- Fontes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0a0a1a 0%, #1a1a3a 50%, #2a1a3a 100%);
            min-height: 100vh;
            color: #fff;
        }

        .magic-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        .magic-bg::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%);
            animation: pulse 8s ease-in-out infinite;
        }

        .magic-bg::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 80% 80%, rgba(198, 40, 40, 0.1) 0%, transparent 50%);
            animation: pulse 10s ease-in-out infinite reverse;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.1); }
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .navbar {
            background: rgba(10, 10, 26, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 215, 0, 0.2);
            border-radius: 20px;
            padding: 15px 20px;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
        }

        .logo-area {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-area h2 {
            font-family: 'MedievalSharp', cursive;
            font-size: 1.3rem;
            background: linear-gradient(45deg, #ffd700, #ff6b6b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .user-id {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(0, 0, 0, 0.3);
            padding: 6px 12px;
            border-radius: 30px;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .user-id i {
            color: #ffd700;
        }

        .user-id .value {
            color: #ffd700;
            font-family: monospace;
            font-weight: 600;
        }

        .user-nick {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 215, 0, 0.1);
            padding: 6px 15px;
            border-radius: 30px;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .user-nick i {
            color: #ffd700;
        }

        .btn-sair {
            background: transparent;
            border: 2px solid rgba(255, 107, 107, 0.5);
            color: #ff6b6b;
            padding: 6px 15px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .btn-sair:hover {
            background: #ff6b6b;
            color: #0a0a1a;
            border-color: #ff6b6b;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
            flex-wrap: wrap;
        }

        .breadcrumb a {
            color: rgba(255, 255, 255, 0.6);
            text-decoration: none;
        }

        .breadcrumb a:hover {
            color: #ffd700;
        }

        .breadcrumb i {
            font-size: 0.7rem;
            color: rgba(255, 215, 0, 0.5);
        }

        .breadcrumb .current {
            color: #ffd700;
        }

        .page-header h1 {
            font-family: 'MedievalSharp', cursive;
            font-size: 2rem;
            background: linear-gradient(45deg, #ffd700, #ffaa00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card {
            background: rgba(10, 10, 26, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 215, 0, 0.2);
            border-radius: 30px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .card-section {
            margin-bottom: 30px;
            padding-bottom: 30px;
            border-bottom: 1px solid rgba(255, 215, 0, 0.1);
        }

        .card-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .card-section h2 {
            font-family: 'MedievalSharp', cursive;
            font-size: 1.5rem;
            color: #ffd700;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .vantagens-grid, .desvantagens-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .vantagem-card, .desvantagem-card {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 215, 0, 0.2);
            border-radius: 12px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .vantagem-card:hover, .desvantagem-card:hover {
            background: rgba(255, 215, 0, 0.1);
            border-color: #ffd700;
            transform: translateY(-2px);
        }

        .vantagem-card.selecionada {
            background: rgba(255, 215, 0, 0.2);
            border-color: #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }

        .vantagem-card h3, .desvantagem-card h3 {
            font-size: 1rem;
            color: #ffd700;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .vantagem-card p, .desvantagem-card p {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 5px;
        }

        .vantagem-card .resumo, .desvantagem-card .resumo {
            font-size: 0.7rem;
            color: rgba(255, 215, 0, 0.8);
            font-style: italic;
        }

        .vantagem-card .check {
            display: none;
            color: #ffd700;
            font-size: 1.2rem;
        }

        .vantagem-card.selecionada .check {
            display: inline;
        }

        .badge-fobia {
            background: rgba(255, 0, 0, 0.3);
            color: #ff6b6b;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            margin-top: 5px;
            display: inline-block;
        }

        .contador-vantagens {
            background: rgba(255, 215, 0, 0.1);
            padding: 10px 15px;
            border-radius: 20px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .contador-vantagens span {
            color: #ffd700;
            font-weight: bold;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 5000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: #1a1a3a;
            border: 2px solid #ffd700;
            border-radius: 20px;
            padding: 20px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-content h3 {
            color: #ffd700;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .fobia-item {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 215, 0, 0.2);
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .fobia-item:hover {
            background: rgba(255, 215, 0, 0.1);
            border-color: #ffd700;
        }

        .fobia-item h4 {
            color: #ffd700;
            margin-bottom: 5px;
        }

        .fobia-item p {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .modal-close {
            background: transparent;
            border: 2px solid #ff6b6b;
            color: #ff6b6b;
            padding: 8px 20px;
            border-radius: 20px;
            cursor: pointer;
            margin-top: 15px;
            width: 100%;
        }

        .resumo-personagem {
            background: rgba(255, 215, 0, 0.1);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .resumo-personagem .foto {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffd700;
            font-size: 1.5rem;
            overflow: hidden;
        }

        .resumo-personagem .foto img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .resumo-personagem .info h3 {
            color: #ffd700;
            margin-bottom: 5px;
        }

        .resumo-personagem .info p {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }

        .loading-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(10, 10, 26, 0.9);
            z-index: 4000;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 20px;
        }

        .loading-overlay.active {
            display: flex;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 5px solid rgba(255, 215, 0, 0.2);
            border-top-color: #ffd700;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .loading-text {
            color: #ffd700;
            font-size: 1.2rem;
            font-family: 'MedievalSharp', cursive;
        }

        .btn-primary, .btn-secondary {
            padding: 12px 30px;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(45deg, #ffd700, #ffaa00);
            color: #0a0a1a;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.4);
        }

        .btn-secondary {
            background: transparent;
            border: 2px solid rgba(255, 215, 0, 0.5);
            color: #ffd700;
        }

        .btn-secondary:hover {
            background: rgba(255, 215, 0, 0.1);
            border-color: #ffd700;
        }

        .card-actions {
            display: flex;
            gap: 15px;
            justify-content: space-between;
            margin-top: 30px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .container { padding: 10px; }
            .card { padding: 20px; }
            .vantagens-grid, .desvantagens-grid { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>
    <div class="magic-bg"></div>

    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Carregando...</div>
    </div>

    <!-- Modal de Fobias -->
    <div class="modal" id="modalFobias">
        <div class="modal-content">
            <h3><i class="fas fa-spider"></i> Escolha uma Fobia</h3>
            
            <div class="fobia-item" data-fobia="acrofobia">
                <h4>Acrofobia</h4>
                <p>Medo de alturas. Não vai a lugares com mais de 5m de altura.</p>
            </div>
            
            <div class="fobia-item" data-fobia="agorafobia">
                <h4>Agorafobia</h4>
                <p>Medo de espaços abertos. Desconfortável sem paredes num raio de 15m.</p>
            </div>
            
            <div class="fobia-item" data-fobia="aracnofobia">
                <h4>Aracnofobia</h4>
                <p>Medo de aranhas.</p>
            </div>
            
            <div class="fobia-item" data-fobia="autofobia">
                <h4>Autofobia</h4>
                <p>Medo de solidão. Não suporta ficar sozinho.</p>
            </div>
            
            <div class="fobia-item" data-fobia="brontofobia">
                <h4>Brontofobia</h4>
                <p>Medo de ruídos altos. Evita tempestades e explosões.</p>
            </div>
            
            <div class="fobia-item" data-fobia="claustrofobia">
                <h4>Claustrofobia</h4>
                <p>Medo de espaços fechados. Pânico em lugares pequenos.</p>
            </div>
            
            <div class="fobia-item" data-fobia="coitofobia">
                <h4>Coitofobia</h4>
                <p>Medo de sexo.</p>
            </div>
            
            <div class="fobia-item" data-fobia="demofobia">
                <h4>Demofobia</h4>
                <p>Medo de multidões. Penalidade progressiva por quantidade de pessoas.</p>
            </div>
            
            <div class="fobia-item" data-fobia="ecmofobia">
                <h4>Ecmofobia</h4>
                <p>Medo de coisas afiadas. Espadas, facas, agulhas.</p>
            </div>
            
            <div class="fobia-item" data-fobia="elurofobia">
                <h4>Elurofobia</h4>
                <p>Medo de gatos.</p>
            </div>
            
            <div class="fobia-item" data-fobia="entomofobia">
                <h4>Entomofobia</h4>
                <p>Medo de insetos. Penalidade para insetos grandes ou muitos.</p>
            </div>
            
            <div class="fobia-item" data-fobia="hematofobia">
                <h4>Hematofobia</h4>
                <p>Medo de sangue. Teste durante combates.</p>
            </div>
            
            <div class="fobia-item" data-fobia="hoplofobia">
                <h4>Hoplofobia</h4>
                <p>Medo de armas. Penalidade ao ser ameaçado.</p>
            </div>
            
            <div class="fobia-item" data-fobia="manafobia">
                <h4>Manafobia</h4>
                <p>Medo de magia. Não aprende magias, reage mal a magos.</p>
            </div>
            
            <div class="fobia-item" data-fobia="misofobia">
                <h4>Misofobia</h4>
                <p>Medo de sujeira. Evita se sujar, comida estranha.</p>
            </div>
            
            <div class="fobia-item" data-fobia="necrofobia">
                <h4>Necrofobia</h4>
                <p>Medo da morte e mortos. Pânico perto de cadáveres.</p>
            </div>
            
            <div class="fobia-item" data-fobia="nictofobia">
                <h4>Nictofobia</h4>
                <p>Medo do escuro. Evita lugares subterrâneos.</p>
            </div>
            
            <div class="fobia-item" data-fobia="ofiofobia">
                <h4>Ofiofobia</h4>
                <p>Medo de répteis. Penalidade para cobras, lagartos.</p>
            </div>
            
            <div class="fobia-item" data-fobia="pirofobia">
                <h4>Pirofobia</h4>
                <p>Medo de fogo. Até cigarro aceso incomoda.</p>
            </div>
            
            <div class="fobia-item" data-fobia="psicofobia">
                <h4>Psicofobia</h4>
                <p>Medo de poderes psíquicos.</p>
            </div>
            
            <div class="fobia-item" data-fobia="talassofobia">
                <h4>Talassofobia</h4>
                <p>Medo do mar. Evita viagens marítimas.</p>
            </div>
            
            <div class="fobia-item" data-fobia="tecnofobia">
                <h4>Tecnofobia</h4>
                <p>Medo de máquinas. Não usa tecnologia avançada.</p>
            </div>
            
            <div class="fobia-item" data-fobia="teratofobia">
                <h4>Teratofobia</h4>
                <p>Medo de monstros. Penalidade progressiva.</p>
            </div>
            
            <div class="fobia-item" data-fobia="triscedecofobia">
                <h4>Triscedecofobia</h4>
                <p>Medo do número 13. Teste ao envolver o número.</p>
            </div>
            
            <div class="fobia-item" data-fobia="xenofobia">
                <h4>Xenofobia</h4>
                <p>Medo do desconhecido/estrangeiros. Penalidade para não-humanos.</p>
            </div>
            
            <button class="modal-close" id="fecharModalFobias">
                <i class="fas fa-times"></i> Fechar
            </button>
        </div>
    </div>

    <div class="container">
        <nav class="navbar">
            <div class="logo-area">
                <h2>RPGForce</h2>
            </div>

            <div class="user-info">
                <div class="user-id">
                    <i class="fas fa-id-card"></i>
                    <span class="value" id="displayIdPc">--------</span>
                </div>
                
                <div class="user-nick">
                    <i class="fas fa-user"></i>
                    <span id="displayNickname">Aventureiro</span>
                </div>
                
                <button class="btn-sair" id="btnSair">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Sair</span>
                </button>
            </div>
        </nav>

        <div class="breadcrumb">
            <a href="dashboard-pc.html"><i class="fas fa-home"></i> Dashboard</a>
            <i class="fas fa-chevron-right"></i>
            <a href="personagens.html">Personagens</a>
            <i class="fas fa-chevron-right"></i>
            <a href="criar-personagem.html">Dados Básicos</a>
            <i class="fas fa-chevron-right"></i>
            <span class="current">Vantagens e Desvantagens</span>
        </div>

        <div class="page-header">
            <h1>
                <i class="fas fa-dragon"></i> 
                Escolha Vantagens e Desvantagens
            </h1>
        </div>

        <div class="card">
            <!-- Resumo do Personagem -->
            <div class="resumo-personagem" id="resumoPersonagem">
                <div class="foto" id="resumoFoto">
                    <i class="fas fa-user"></i>
                </div>
                <div class="info">
                    <h3 id="resumoNome">Carregando...</h3>
                    <p id="resumoDetalhes">Classe: <span id="resumoClasse">-</span> | Aparência: <span id="resumoAparencia">-</span> | Riqueza: <span id="resumoRiqueza">-</span></p>
                </div>
            </div>

            <!-- VANTAGENS -->
            <div class="card-section">
                <h2><i class="fas fa-star"></i> Vantagens <span style="font-size: 0.8rem; color: rgba(255,255,255,0.6);">(escolha 3)</span></h2>
                
                <div class="contador-vantagens">
                    <span><i class="fas fa-check-circle"></i> Vantagens selecionadas:</span>
                    <span id="contadorVantagens">0/3</span>
                </div>
                
                <div class="vantagens-grid" id="vantagensGrid">
                    <div class="vantagem-card" data-vantagem="aliado">
                        <h3>Aliado <span class="check"><i class="fas fa-check-circle"></i></span></h3>
                        <p class="resumo">Um companheiro fiel</p>
                    </div>
                    
                    <div class="vantagem-card" data-vantagem="ambidestria">
                        <h3>Ambidestria <span class="check"><i class="fas fa-check-circle"></i></span></h3>
                        <p class="resumo">Usa ambas as mãos sem penalidade</p>
                    </div>
                    
                    <div class="vantagem-card" data-vantagem="aptidaoMagica">
                        <h3>Aptidão mágica +1 <span class="check"><i class="fas fa-check-circle"></i></span></h3>
                        <p class="resumo">Bônus em magias</p>
                    </div>
                    
                    <div class="vantagem-card" data-vantagem="abascanto">
                        <h3>Abascanto +3 <span class="check"><i class="fas fa-check-circle"></i></span></h3>
                        <p class="resumo">Resistência a magia +3</p>
                    </div>
                    
                    <div class="vantagem-card" data-vantagem="carisma">
                        <h3>Carisma +1 <span class="check"><i class="fas fa-check-circle"></i></span></h3>
                        <p class="resumo">Persuasão, liderança</p>
                    </div>
                    
                    <div class="vantagem-card" data-vantagem="destemor">
                        <h3>Destemor +2 <span class="check"><i class="fas fa-check-circle"></i></span></h3>
                        <p class="resumo">Resistência a medo/intimidação</p>
                    </div>
                    
                    <div class="vantagem-card" data-vantagem="duroMatar">
                        <h3>Duro de matar +2 <span class="check"><i class="fas fa-check-circle"></i></span></h3>
                        <p class="resumo">Bônus em HT ou resistência</p>
                    </div>
                    
                    <div class="vantagem-card" data-vantagem="flexibilidade">
                        <h3>Flexibilidade <span class="check"><i class="fas fa-check-circle"></i></span></h3>
                        <p class="resumo">Bônus em testes de DX/escapar</p>
                    </div>
                    
                    <div class="vantagem-card" data-vantagem="intuicao">
                        <h3>Intuição <span class="check"><i class="fas fa-check-circle"></i></span></h3>
                        <p class="resumo">Sentir quando algo está errado</p>
                    </div>
                    
                    <div class="vantagem-card" data-vantagem="nocaoPerigo">
                        <h3>Noção do perigo <span class="check"><i class="fas fa-check-circle"></i></span></h3>
                        <p class="resumo">Alerta contra emboscadas</p>
                    </div>
                    
                    <div class="vantagem-card" data-vantagem="reflexoCombate">
                        <h3>Reflexo de combate <span class="check"><i class="fas fa-check-circle"></i></span></h3>
                        <p class="resumo">Iniciativa, esquiva</p>
                    </div>
                    
                    <div class="vantagem-card" data-vantagem="regeneracao">
                        <h3>Regeneração <span class="check"><i class="fas fa-check-circle"></i></span></h3>
                        <p class="resumo">Recupera vida mais rápido</p>
                    </div>
                    
                    <div class="vantagem-card" data-vantagem="sentidosAgucados">
                        <h3>Sentidos aguçados +2 <span class="check"><i class="fas fa-check-circle"></i></span></h3>
                        <p class="resumo">Percepção +2</p>
                    </div>
                    
                    <div class="vantagem-card" data-vantagem="sorte">
                        <h3>Sorte <span class="check"><i class="fas fa-check-circle"></i></span></h3>
                        <p class="resumo">Pode rerolar testes</p>
                    </div>
                    
                    <div class="vantagem-card" data-vantagem="visaoNoturna">
                        <h3>Visão noturna <span class="check"><i class="fas fa-check-circle"></i></span></h3>
                        <p class="resumo">Enxerga no escuro</p>
                    </div>
                    
                    <div class="vantagem-card" data-vantagem="mestreArmas">
                        <h3>Mestre das armas <span class="check"><i class="fas fa-check-circle"></i></span></h3>
                        <p class="resumo">Bônus com armas</p>
                    </div>
                    
                    <div class="vantagem-card" data-vantagem="forcaVontade">
                        <h3>Força de vontade +2 <span class="check"><i class="fas fa-check-circle"></i></span></h3>
                        <p class="resumo">Resistência mental +2</p>
                    </div>
                    
                    <div class="vantagem-card" data-vantagem="fadigaExtra">
                        <h3>Fadiga extra +2 <span class="check"><i class="fas fa-check-circle"></i></span></h3>
                        <p class="resumo">+2 na reserva de fadiga</p>
                    </div>
                    
                    <div class="vantagem-card" data-vantagem="htExtra">
                        <h3>HT extra +5% <span class="check"><i class="fas fa-check-circle"></i></span></h3>
                        <p class="resumo">Aumento percentual no Vigor</p>
                    </div>
                </div>
            </div>

            <!-- DESVANTAGENS -->
            <div class="card-section">
                <h2><i class="fas fa-skull"></i> Desvantagens</h2>
                <p style="color: rgba(255,255,255,0.6); margin-bottom: 15px; font-size: 0.9rem;">
                    <i class="fas fa-info-circle"></i> Opcionais. Clique para selecionar.
                </p>
                
                <div class="desvantagens-grid" id="desvantagensGrid">
                    <div class="desvantagem-card" data-desvantagem="alcoolismo">
                        <h3>Alcoolismo</h3>
                        <p class="resumo">Vício em bebida</p>
                    </div>
                    
                    <div class="desvantagem-card" data-desvantagem="avareza">
                        <h3>Avareza</h3>
                        <p class="resumo">Mesquinho, ama dinheiro</p>
                    </div>
                    
                    <div class="desvantagem-card" data-desvantagem="briguento">
                        <h3>Briguento</h3>
                        <p class="resumo">Adora uma briga</p>
                    </div>
                    
                    <div class="desvantagem-card" data-desvantagem="barulhento">
                        <h3>Barulhento +2</h3>
                        <p class="resumo">Não consegue ser furtivo</p>
                    </div>
                    
                    <div class="desvantagem-card" data-desvantagem="cobica">
                        <h3>Cobiça</h3>
                        <p class="resumo">Quer tudo que vê</p>
                    </div>
                    
                    <div class="desvantagem-card" data-desvantagem="circunspeccao">
                        <h3>Circunspecção</h3>
                        <p class="resumo">Cautela extrema</p>
                    </div>
                    
                    <div class="desvantagem-card" data-desvantagem="cleptomania">
                        <h3>Cleptomania</h3>
                        <p class="resumo">Compulsão por roubar</p>
                    </div>
                    
                    <div class="desvantagem-card" data-desvantagem="codigoHonra">
                        <h3>Código de honra</h3>
                        <p class="resumo">Segue regras rígidas</p>
                    </div>
                    
                    <div class="desvantagem-card" data-desvantagem="covardia">
                        <h3>Covardia</h3>
                        <p class="resumo">Foge de perigo</p>
                    </div>
                    
                    <div class="desvantagem-card" data-desvantagem="daltonismo">
                        <h3>Daltonismo</h3>
                        <p class="resumo">Não vê cores</p>
                    </div>
                    
                    <div class="desvantagem-card" data-desvantagem="sensoDever">
                        <h3>Senso do dever</h3>
                        <p class="resumo">Protege algo/alguém</p>
                    </div>
                    
                    <div class="desvantagem-card" data-desvantagem="inimigo">
                        <h3>Inimigo</h3>
                        <p class="resumo">Alguém te persegue</p>
                    </div>
                    
                    <div class="desvantagem-card" data-desvantagem="excessoConfianca">
                        <h3>Excesso de confiança</h3>
                        <p class="resumo">Se acha mais capaz</p>
                    </div>
                    
                    <div class="desvantagem-card" id="cardFobia" data-desvantagem="fobia">
                        <h3>Fobia <i class="fas fa-chevron-right" style="font-size: 0.8rem;"></i></h3>
                        <p class="resumo">Clique para escolher</p>
                        <span class="badge-fobia" id="fobiaEscolhida" style="display: none;">Nenhuma</span>
                    </div>
                    
                    <div class="desvantagem-card" data-desvantagem="furia">
                        <h3>Fúria</h3>
                        <p class="resumo">Perde o controle na raiva</p>
                    </div>
                    
                    <div class="desvantagem-card" data-desvantagem="honestidade">
                        <h3>Honestidade</h3>
                        <p class="resumo">Não consegue mentir</p>
                    </div>
                    
                    <div class="desvantagem-card" data-desvantagem="luxuria">
                        <h3>Luxúria</h3>
                        <p class="resumo">Obcecado por prazeres</p>
                    </div>
                    
                    <div class="desvantagem-card" data-desvantagem="megalomania">
                        <h3>Megalomania</h3>
                        <p class="resumo">Quer dominar o mundo</p>
                    </div>
                    
                    <div class="desvantagem-card" data-desvantagem="pacifismo">
                        <h3>Pacifismo</h3>
                        <p class="resumo">Não suporta violência</p>
                    </div>
                    
                    <div class="desvantagem-card" data-desvantagem="piromania">
                        <h3>Piromania</h3>
                        <p class="resumo">Adora fogo</p>
                    </div>
                    
                    <div class="desvantagem-card" data-desvantagem="preguica">
                        <h3>Preguiça</h3>
                        <p class="resumo">Evita esforço</p>
                    </div>
                    
                    <div class="desvantagem-card" data-desvantagem="sanguinolencia">
                        <h3>Sanguinolência</h3>
                        <p class="resumo">Adora ver sangue</p>
                    </div>
                    
                    <div class="desvantagem-card" data-desvantagem="teimosia">
                        <h3>Teimosia</h3>
                        <p class="resumo">Não muda de ideia</p>
                    </div>
                    
                    <div class="desvantagem-card" data-desvantagem="veracidade">
                        <h3>Veracidade</h3>
                        <p class="resumo">Sempre fala a verdade</p>
                    </div>
                    
                    <div class="desvantagem-card" data-desvantagem="zarolho">
                        <h3>Zarolho</h3>
                        <p class="resumo">Tem só um olho</p>
                    </div>
                    
                    <div class="desvantagem-card" data-desvantagem="magro">
                        <h3>Magro</h3>
                        <p class="resumo">-20% peso, vulnerável a quedas</p>
                    </div>
                    
                    <div class="desvantagem-card" data-desvantagem="gordo">
                        <h3>Gordo</h3>
                        <p class="resumo">+20% peso, perde fadiga rápido</p>
                    </div>
                    
                    <div class="desvantagem-card" data-desvantagem="nanismo">
                        <h3>Nanismo</h3>
                        <p class="resumo">-1 deslocamento, altura máx 1.30m</p>
                    </div>
                </div>
            </div>

            <!-- Botões -->
            <div class="card-actions">
                <button type="button" class="btn-secondary" id="btnVoltar">
                    <i class="fas fa-arrow-left"></i> Voltar
                </button>
                <button type="button" class="btn-primary" id="btnFinalizar">
                    <i class="fas fa-save"></i> Finalizar Personagem
                </button>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
        import { 
            getAuth, 
            signOut,
            onAuthStateChanged 
        } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";
        import { 
            getFirestore, 
            doc,
            setDoc,
            collection,
            getDoc,
            updateDoc
        } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBrx4JSmFay24k95pu1ICjFfVki8gs_uHw",
            authDomain: "rpgforce-e3227.firebaseapp.com",
            projectId: "rpgforce-e3227",
            storageBucket: "rpgforce-e3227.firebasestorage.app",
            messagingSenderId: "984517342332",
            appId: "1:984517342332:web:87d33aa4c84ff2a07685f9"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        const displayIdPc = document.getElementById('displayIdPc');
        const displayNickname = document.getElementById('displayNickname');
        const btnSair = document.getElementById('btnSair');
        const loadingOverlay = document.getElementById('loadingOverlay');
        const btnFinalizar = document.getElementById('btnFinalizar');
        const btnVoltar = document.getElementById('btnVoltar');
        
        const modalFobias = document.getElementById('modalFobias');
        const fecharModalFobias = document.getElementById('fecharModalFobias');
        const fobiaEscolhida = document.getElementById('fobiaEscolhida');
        const cardFobia = document.getElementById('cardFobia');

        const resumoNome = document.getElementById('resumoNome');
        const resumoClasse = document.getElementById('resumoClasse');
        const resumoAparencia = document.getElementById('resumoAparencia');
        const resumoRiqueza = document.getElementById('resumoRiqueza');
        const resumoFoto = document.getElementById('resumoFoto');

        const vantagensSelecionadas = new Set();
        const desvantagensSelecionadas = new Set();
        const vantagensCards = document.querySelectorAll('.vantagem-card');
        const desvantagensCards = document.querySelectorAll('.desvantagem-card:not(#cardFobia)');
        const contadorVantagensSpan = document.getElementById('contadorVantagens');
        let fobiaSelecionada = null;
        let personagemTemp = null;

        function showLoading() { loadingOverlay.classList.add('active'); }
        function hideLoading() { loadingOverlay.classList.remove('active'); }

        try {
            personagemTemp = JSON.parse(sessionStorage.getItem('personagemTemp'));
            if (!personagemTemp) {
                window.location.href = 'criar-personagem.html';
            } else {
                resumoNome.textContent = personagemTemp.nome;
                resumoClasse.textContent = personagemTemp.classe;
                
                let aparenciaTexto = 'Normal';
                if (personagemTemp.aparencia === 'feio') aparenciaTexto = 'Feio';
                if (personagemTemp.aparencia === 'atraente') aparenciaTexto = 'Atraente';
                resumoAparencia.textContent = aparenciaTexto;
                
                let riquezaTexto = 'Médio';
                if (personagemTemp.riqueza === 'pobre') riquezaTexto = 'Pobre';
                if (personagemTemp.riqueza === 'rico') riquezaTexto = 'Rico';
                resumoRiqueza.textContent = riquezaTexto;
                
                if (personagemTemp.fotoURL) {
                    resumoFoto.innerHTML = `<img src="${personagemTemp.fotoURL}" alt="Foto">`;
                }
            }
        } catch (e) {
            window.location.href = 'criar-personagem.html';
        }

        function atualizarContadorVantagens() {
            contadorVantagensSpan.textContent = `${vantagensSelecionadas.size}/3`;
        }

        function selecionarVantagem(card) {
            const vantagemId = card.dataset.vantagem;
            
            if (vantagensSelecionadas.has(vantagemId)) {
                vantagensSelecionadas.delete(vantagemId);
                card.classList.remove('selecionada');
            } else {
                if (vantagensSelecionadas.size < 3) {
                    vantagensSelecionadas.add(vantagemId);
                    card.classList.add('selecionada');
                } else {
                    alert('Você já selecionou 3 vantagens!');
                }
            }
            
            atualizarContadorVantagens();
        }

        vantagensCards.forEach(card => {
            card.addEventListener('click', () => selecionarVantagem(card));
        });

        function selecionarDesvantagem(card) {
            const desvantagemId = card.dataset.desvantagem;
            
            if (desvantagensSelecionadas.has(desvantagemId)) {
                desvantagensSelecionadas.delete(desvantagemId);
                card.style.background = 'rgba(0, 0, 0, 0.3)';
                card.style.borderColor = 'rgba(255, 215, 0, 0.2)';
            } else {
                desvantagensSelecionadas.add(desvantagemId);
                card.style.background = 'rgba(255, 0, 0, 0.2)';
                card.style.borderColor = '#ff6b6b';
            }
        }

        desvantagensCards.forEach(card => {
            card.addEventListener('click', () => selecionarDesvantagem(card));
        });

        cardFobia.addEventListener('click', () => {
            modalFobias.classList.add('active');
        });

        fecharModalFobias.addEventListener('click', () => {
            modalFobias.classList.remove('active');
        });

        modalFobias.addEventListener('click', (e) => {
            if (e.target === modalFobias) {
                modalFobias.classList.remove('active');
            }
        });

        document.querySelectorAll('.fobia-item').forEach(item => {
            item.addEventListener('click', () => {
                const fobia = item.dataset.fobia;
                const nomeFobia = item.querySelector('h4').textContent;
                
                fobiaSelecionada = fobia;
                
                fobiaEscolhida.style.display = 'inline-block';
                fobiaEscolhida.textContent = nomeFobia;
                cardFobia.style.background = 'rgba(255, 0, 0, 0.2)';
                cardFobia.style.borderColor = '#ff6b6b';
                
                desvantagensSelecionadas.add(`fobia:${fobia}`);
                
                modalFobias.classList.remove('active');
            });
        });

        onAuthStateChanged(auth, async (user) => {
            if (user) {
                const docRef = doc(db, "usuarios", user.uid);
                const docSnap = await getDoc(docRef);
                
                if (docSnap.exists()) {
                    const userData = docSnap.data();
                    displayIdPc.textContent = userData.id_pc || '--------';
                    displayNickname.textContent = userData.nickname || 'Aventureiro';
                }
            } else {
                window.location.href = 'index.html';
            }
        });

        btnSair.addEventListener('click', async () => {
            try {
                showLoading();
                await signOut(auth);
                window.location.href = 'index.html';
            } catch (error) {
                hideLoading();
            }
        });

        btnVoltar.addEventListener('click', () => {
            window.location.href = 'criar-personagem.html';
        });

        btnFinalizar.addEventListener('click', async () => {
            if (vantagensSelecionadas.size === 0) {
                alert('Escolha pelo menos 1 vantagem');
                return;
            }

            try {
                showLoading();
                const user = auth.currentUser;
                
                const personagemRef = doc(collection(db, "personagens"));
                const personagemId = personagemRef.id;

                let reacaoBase = 0;
                if (personagemTemp.aparencia === 'feio') reacaoBase = -2;
                if (personagemTemp.aparencia === 'atraente') reacaoBase = 2;

                let dinheiro = 50;
                if (personagemTemp.riqueza === 'pobre') dinheiro = 25;
                if (personagemTemp.riqueza === 'rico') dinheiro = 250;

                const personagemData = {
                    id: personagemId,
                    userId: user.uid,
                    nome: personagemTemp.nome,
                    classe: personagemTemp.classe,
                    fotoURL: personagemTemp.fotoURL || '',
                    
                    aparencia: personagemTemp.aparencia,
                    riqueza: personagemTemp.riqueza,
                    peculiaridades: personagemTemp.peculiaridades || '',
                    
                    vantagens: Array.from(vantagensSelecionadas),
                    desvantagens: Array.from(desvantagensSelecionadas),
                    fobia: fobiaSelecionada,
                    
                    pontos: {
                        xp: 0,
                        xpTotal: 0,
                        pm: 0,
                        dinheiro: dinheiro
                    },
                    
                    atributos: {
                        st: personagemTemp.atributos.st,
                        dx: personagemTemp.atributos.dx,
                        iq: personagemTemp.atributos.iq,
                        ht: personagemTemp.atributos.ht
                    },
                    
                    status: {
                        vidaAtual: personagemTemp.status.vidaMax,
                        vidaMax: personagemTemp.status.vidaMax,
                        fadigaAtual: personagemTemp.status.fadigaMax,
                        fadigaMax: personagemTemp.status.fadigaMax,
                        manaAtual: personagemTemp.status.manaMax,
                        manaMax: personagemTemp.status.manaMax
                    },
                    
                    derivados: personagemTemp.derivados,
                    
                    reacao: {
                        base: reacaoBase,
                        total: reacaoBase
                    },
                    
                    createdAt: new Date(),
                    updatedAt: new Date()
                };

                await setDoc(personagemRef, personagemData);
                
                sessionStorage.removeItem('personagemTemp');
                
                window.location.href = `aventura-solo.html?personagemId=${personagemId}`;
                
            } catch (error) {
                alert('Erro ao criar personagem. Tente novamente.');
                hideLoading();
            }
        });
    </script>
</body>
</html>